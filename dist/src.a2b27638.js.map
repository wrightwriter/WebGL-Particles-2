{"version":3,"sources":["src/m4.js","src/setGeometry.js","src/setColors.js","src/utils.js","src/shaders.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["m4","projection","width","height","depth","multiply","a","b","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","translation","tx","ty","tz","xRotation","angleInRadians","c","Math","cos","s","sin","yRotation","zRotation","scaling","sx","sy","sz","translate","m","xRotate","yRotate","zRotate","scale","orthographic","left","right","bottom","top","near","far","geometryF","Float32Array","setGeometry","gl","bufferData","ARRAY_BUFFER","STATIC_DRAW","setColors","Uint8Array","createProgram","shaders","opt_attribs","opt_locations","opt_errorCallback","errFn","error","program","forEach","shader","attachShader","attrib","ndx","bindAttribLocation","linkProgram","linked","getProgramParameter","LINK_STATUS","lastError","getProgramInfoLog","deleteProgram","msg","console","makeBuffer","attributeLocationName","size","type","normalize","stride","offset","data","positionAttributeLocation","getAttribLocation","pointsBuffer","createBuffer","enableVertexAttribArray","bindBuffer","FLOAT","vertexAttribPointer","bufferObject","attributeLocation","properties","defaultShaderType","createProgramFromSources","shaderSources","ii","length","push","loadShader","shaderSource","shaderType","createShader","compileShader","compiled","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","vertexShaderSource","fragmentShaderSource","computeShaderSource","computeShaderSourceOld","radToDeg","r","PI","degToRad","d","document","getElementById","innerHTML","NUM_PARTICLES","main","checkErorrs","ctx","e","getError","NO_ERROR","log","canvas","WIDTH","HEIGHT","getContext","antialias","programDrawParticles","webglUtils","computeShader","COMPUTE_SHADER","programCompute","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texStorage2D","RGBA32F","bindImageTexture","WRITE_ONLY","RGBA8","frameBuffer","createFramebuffer","bindFramebuffer","READ_FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","colorLocation","getUniformLocation","matrixLocation","fudgeLocation","colorAttributeLocation","vaoP","createVertexArray","bindVertexArray","pBuffer","GL_FLOAT","rotation","color","random","positionMouse","x","y","window","addEventListener","getMousePosition","call","timePrevious","Date","getTime","timeNext","timeDelta","timeElapsed","timeStarted","setInterval","runCompute","drawParticles","webglLessonsUI","setupSlider","value","slide","updatePosition","max","index","event","ui","drawScene","useProgram","uniform1i","uniform2fv","clientWidth","clientHeight","uniform1f","dispatchCompute","memoryBarrier","SHADER_IMAGE_ACCESS_BARRIER_BIT","resizeCanvasToDisplaySize","viewport","enable","CULL_FACE","DEPTH_TEST","matrix","i","uniformMatrix4fv","count","drawArrays","POINTS","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","clearColor","clear","DEPTH_BUFFER_BIT","uniform4fv","fudgeFactor","primitiveType","TRIANGLES","getRelativeMousePosition","target","rect","getBoundingClientRect","clientX","clientY","pos","getNoPaddingNoBorderCanvasRelativeMousePosition","setupCompute","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","getParents","modules","parents","k","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["var m4 = {\r\n  projection: function(width, height, depth) {\r\n    // Note: This matrix flips the Y axis so 0 is at the top.\r\n    return [\r\n      2 / width,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      -2 / height,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      2 / depth,\r\n      0,\r\n      -1,\r\n      1,\r\n      0,\r\n      1\r\n    ];\r\n  },\r\n\r\n  multiply: function(a, b) {\r\n    var a00 = a[0 * 4 + 0];\r\n    var a01 = a[0 * 4 + 1];\r\n    var a02 = a[0 * 4 + 2];\r\n    var a03 = a[0 * 4 + 3];\r\n    var a10 = a[1 * 4 + 0];\r\n    var a11 = a[1 * 4 + 1];\r\n    var a12 = a[1 * 4 + 2];\r\n    var a13 = a[1 * 4 + 3];\r\n    var a20 = a[2 * 4 + 0];\r\n    var a21 = a[2 * 4 + 1];\r\n    var a22 = a[2 * 4 + 2];\r\n    var a23 = a[2 * 4 + 3];\r\n    var a30 = a[3 * 4 + 0];\r\n    var a31 = a[3 * 4 + 1];\r\n    var a32 = a[3 * 4 + 2];\r\n    var a33 = a[3 * 4 + 3];\r\n    var b00 = b[0 * 4 + 0];\r\n    var b01 = b[0 * 4 + 1];\r\n    var b02 = b[0 * 4 + 2];\r\n    var b03 = b[0 * 4 + 3];\r\n    var b10 = b[1 * 4 + 0];\r\n    var b11 = b[1 * 4 + 1];\r\n    var b12 = b[1 * 4 + 2];\r\n    var b13 = b[1 * 4 + 3];\r\n    var b20 = b[2 * 4 + 0];\r\n    var b21 = b[2 * 4 + 1];\r\n    var b22 = b[2 * 4 + 2];\r\n    var b23 = b[2 * 4 + 3];\r\n    var b30 = b[3 * 4 + 0];\r\n    var b31 = b[3 * 4 + 1];\r\n    var b32 = b[3 * 4 + 2];\r\n    var b33 = b[3 * 4 + 3];\r\n    return [\r\n      b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\r\n      b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\r\n      b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\r\n      b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\r\n      b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\r\n      b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\r\n      b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\r\n      b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\r\n      b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\r\n      b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\r\n      b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\r\n      b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\r\n      b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\r\n      b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\r\n      b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\r\n      b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33\r\n    ];\r\n  },\r\n\r\n  translation: function(tx, ty, tz) {\r\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1];\r\n  },\r\n\r\n  xRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [1, 0, 0, 0, 0, c, s, 0, 0, -s, c, 0, 0, 0, 0, 1];\r\n  },\r\n\r\n  yRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [c, 0, -s, 0, 0, 1, 0, 0, s, 0, c, 0, 0, 0, 0, 1];\r\n  },\r\n\r\n  zRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [c, s, 0, 0, -s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n  },\r\n\r\n  scaling: function(sx, sy, sz) {\r\n    return [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1];\r\n  },\r\n\r\n  translate: function(m, tx, ty, tz) {\r\n    return m4.multiply(m, m4.translation(tx, ty, tz));\r\n  },\r\n\r\n  xRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.xRotation(angleInRadians));\r\n  },\r\n\r\n  yRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.yRotation(angleInRadians));\r\n  },\r\n\r\n  zRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.zRotation(angleInRadians));\r\n  },\r\n\r\n  scale: function(m, sx, sy, sz) {\r\n    return m4.multiply(m, m4.scaling(sx, sy, sz));\r\n  },\r\n  orthographic: function(left, right, bottom, top, near, far) {\r\n    return [\r\n      2 / (right - left),\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      2 / (top - bottom),\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      2 / (near - far),\r\n      0,\r\n\r\n      (left + right) / (left - right),\r\n      (bottom + top) / (bottom - top),\r\n      (near + far) / (near - far),\r\n      1\r\n    ];\r\n  }\r\n};\r\nexport { m4 };\r\n","// Fill the current ARRAY_BUFFER buffer\r\n// with the values that define a letter 'F'.\r\n\r\nconst geometryF = new Float32Array([\r\n  // left column front\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  150,\r\n  0,\r\n  30,\r\n  0,\r\n  0,\r\n  0,\r\n  150,\r\n  0,\r\n  30,\r\n  150,\r\n  0,\r\n  30,\r\n  0,\r\n  0,\r\n\r\n  // top rung front\r\n  30,\r\n  0,\r\n  0,\r\n  30,\r\n  30,\r\n  0,\r\n  100,\r\n  0,\r\n  0,\r\n  30,\r\n  30,\r\n  0,\r\n  100,\r\n  30,\r\n  0,\r\n  100,\r\n  0,\r\n  0,\r\n\r\n  // middle rung front\r\n  30,\r\n  60,\r\n  0,\r\n  30,\r\n  90,\r\n  0,\r\n  67,\r\n  60,\r\n  0,\r\n  30,\r\n  90,\r\n  0,\r\n  67,\r\n  90,\r\n  0,\r\n  67,\r\n  60,\r\n  0,\r\n\r\n  // left column back\r\n  0,\r\n  0,\r\n  30,\r\n  30,\r\n  0,\r\n  30,\r\n  0,\r\n  150,\r\n  30,\r\n  0,\r\n  150,\r\n  30,\r\n  30,\r\n  0,\r\n  30,\r\n  30,\r\n  150,\r\n  30,\r\n\r\n  // top rung back\r\n  30,\r\n  0,\r\n  30,\r\n  100,\r\n  0,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  100,\r\n  0,\r\n  30,\r\n  100,\r\n  30,\r\n  30,\r\n\r\n  // middle rung back\r\n  30,\r\n  60,\r\n  30,\r\n  67,\r\n  60,\r\n  30,\r\n  30,\r\n  90,\r\n  30,\r\n  30,\r\n  90,\r\n  30,\r\n  67,\r\n  60,\r\n  30,\r\n  67,\r\n  90,\r\n  30,\r\n\r\n  // top\r\n  0,\r\n  0,\r\n  0,\r\n  100,\r\n  0,\r\n  0,\r\n  100,\r\n  0,\r\n  30,\r\n  0,\r\n  0,\r\n  0,\r\n  100,\r\n  0,\r\n  30,\r\n  0,\r\n  0,\r\n  30,\r\n\r\n  // top rung right\r\n  100,\r\n  0,\r\n  0,\r\n  100,\r\n  30,\r\n  0,\r\n  100,\r\n  30,\r\n  30,\r\n  100,\r\n  0,\r\n  0,\r\n  100,\r\n  30,\r\n  30,\r\n  100,\r\n  0,\r\n  30,\r\n\r\n  // under top rung\r\n  30,\r\n  30,\r\n  0,\r\n  30,\r\n  30,\r\n  30,\r\n  100,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  0,\r\n  100,\r\n  30,\r\n  30,\r\n  100,\r\n  30,\r\n  0,\r\n\r\n  // between top rung and middle\r\n  30,\r\n  30,\r\n  0,\r\n  30,\r\n  60,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  30,\r\n  0,\r\n  30,\r\n  60,\r\n  0,\r\n  30,\r\n  60,\r\n  30,\r\n\r\n  // top of middle rung\r\n  30,\r\n  60,\r\n  0,\r\n  67,\r\n  60,\r\n  30,\r\n  30,\r\n  60,\r\n  30,\r\n  30,\r\n  60,\r\n  0,\r\n  67,\r\n  60,\r\n  0,\r\n  67,\r\n  60,\r\n  30,\r\n\r\n  // right of middle rung\r\n  67,\r\n  60,\r\n  0,\r\n  67,\r\n  90,\r\n  30,\r\n  67,\r\n  60,\r\n  30,\r\n  67,\r\n  60,\r\n  0,\r\n  67,\r\n  90,\r\n  0,\r\n  67,\r\n  90,\r\n  30,\r\n\r\n  // bottom of middle rung.\r\n  30,\r\n  90,\r\n  0,\r\n  30,\r\n  90,\r\n  30,\r\n  67,\r\n  90,\r\n  30,\r\n  30,\r\n  90,\r\n  0,\r\n  67,\r\n  90,\r\n  30,\r\n  67,\r\n  90,\r\n  0,\r\n\r\n  // right of bottom\r\n  30,\r\n  90,\r\n  0,\r\n  30,\r\n  150,\r\n  30,\r\n  30,\r\n  90,\r\n  30,\r\n  30,\r\n  90,\r\n  0,\r\n  30,\r\n  150,\r\n  0,\r\n  30,\r\n  150,\r\n  30,\r\n\r\n  // bottom\r\n  0,\r\n  150,\r\n  0,\r\n  0,\r\n  150,\r\n  30,\r\n  30,\r\n  150,\r\n  30,\r\n  0,\r\n  150,\r\n  0,\r\n  30,\r\n  150,\r\n  30,\r\n  30,\r\n  150,\r\n  0,\r\n\r\n  // left side\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  30,\r\n  0,\r\n  150,\r\n  30,\r\n  0,\r\n  0,\r\n  0,\r\n  0,\r\n  150,\r\n  30,\r\n  0,\r\n  150,\r\n  0\r\n]);\r\n\r\nfunction setGeometry(gl) {\r\n  gl.bufferData(gl.ARRAY_BUFFER, geometryF, gl.STATIC_DRAW);\r\n}\r\n\r\nexport { setGeometry, geometryF };\r\n","function setColors(gl) {\r\n  gl.bufferData(\r\n    gl.ARRAY_BUFFER,\r\n    new Uint8Array([\r\n      // left column front\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n\r\n      // top rung front\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n\r\n      // middle rung front\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n      200,\r\n      70,\r\n      120,\r\n\r\n      // left column back\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n\r\n      // top rung back\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n\r\n      // middle rung back\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n      80,\r\n      70,\r\n      200,\r\n\r\n      // top\r\n      70,\r\n      200,\r\n      210,\r\n      70,\r\n      200,\r\n      210,\r\n      70,\r\n      200,\r\n      210,\r\n      70,\r\n      200,\r\n      210,\r\n      70,\r\n      200,\r\n      210,\r\n      70,\r\n      200,\r\n      210,\r\n\r\n      // top rung right\r\n      200,\r\n      200,\r\n      70,\r\n      200,\r\n      200,\r\n      70,\r\n      200,\r\n      200,\r\n      70,\r\n      200,\r\n      200,\r\n      70,\r\n      200,\r\n      200,\r\n      70,\r\n      200,\r\n      200,\r\n      70,\r\n\r\n      // under top rung\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n\r\n      // between top rung and middle\r\n      210,\r\n      160,\r\n      70,\r\n      210,\r\n      160,\r\n      70,\r\n      210,\r\n      160,\r\n      70,\r\n      210,\r\n      160,\r\n      70,\r\n      210,\r\n      160,\r\n      70,\r\n      210,\r\n      160,\r\n      70,\r\n\r\n      // top of middle rung\r\n      70,\r\n      180,\r\n      210,\r\n      70,\r\n      180,\r\n      210,\r\n      70,\r\n      180,\r\n      210,\r\n      70,\r\n      180,\r\n      210,\r\n      70,\r\n      180,\r\n      210,\r\n      70,\r\n      180,\r\n      210,\r\n\r\n      // right of middle rung\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n      100,\r\n      70,\r\n      210,\r\n\r\n      // bottom of middle rung.\r\n      76,\r\n      210,\r\n      100,\r\n      76,\r\n      210,\r\n      100,\r\n      76,\r\n      210,\r\n      100,\r\n      76,\r\n      210,\r\n      100,\r\n      76,\r\n      210,\r\n      100,\r\n      76,\r\n      210,\r\n      100,\r\n\r\n      // right of bottom\r\n      140,\r\n      210,\r\n      80,\r\n      140,\r\n      210,\r\n      80,\r\n      140,\r\n      210,\r\n      80,\r\n      140,\r\n      210,\r\n      80,\r\n      140,\r\n      210,\r\n      80,\r\n      140,\r\n      210,\r\n      80,\r\n\r\n      // bottom\r\n      90,\r\n      130,\r\n      110,\r\n      90,\r\n      130,\r\n      110,\r\n      90,\r\n      130,\r\n      110,\r\n      90,\r\n      130,\r\n      110,\r\n      90,\r\n      130,\r\n      110,\r\n      90,\r\n      130,\r\n      110,\r\n\r\n      // left side\r\n      160,\r\n      160,\r\n      220,\r\n      160,\r\n      160,\r\n      220,\r\n      160,\r\n      160,\r\n      220,\r\n      160,\r\n      160,\r\n      220,\r\n      160,\r\n      160,\r\n      220,\r\n      160,\r\n      160,\r\n      220\r\n    ]),\r\n    gl.STATIC_DRAW\r\n  );\r\n}\r\n\r\nexport { setColors };\r\n","export function createProgram(\r\n  gl, shaders, opt_attribs, opt_locations, opt_errorCallback) {\r\nconst errFn = opt_errorCallback || error;\r\nconst program = gl.createProgram();\r\nshaders.forEach(function(shader) {\r\n  gl.attachShader(program, shader);\r\n});\r\nif (opt_attribs) {\r\n  opt_attribs.forEach(function(attrib, ndx) {\r\n    gl.bindAttribLocation(\r\n        program,\r\n        opt_locations ? opt_locations[ndx] : ndx,\r\n        attrib);\r\n  });\r\n}\r\ngl.linkProgram(program);\r\n\r\n// Check the link status\r\nconst linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\nif (!linked) {\r\n    // something went wrong with the link\r\n    const lastError = gl.getProgramInfoLog(program);\r\n    errFn(\"Error in program linking:\" + lastError);\r\n\r\n    gl.deleteProgram(program);\r\n    return null;\r\n}\r\nreturn program;\r\n}\r\n\r\nfunction error(msg) {\r\n  console.error(msg)\r\n}\r\n\r\nexport function makeBuffer(\r\n  gl,\r\n  attributeLocationName,\r\n  program,\r\n  size,\r\n  type,\r\n  normalize,\r\n  stride,\r\n  offset,\r\n  data\r\n) {\r\n  const positionAttributeLocation = gl.getAttribLocation(\r\n    program,\r\n    attributeLocationName\r\n  );\r\n\r\n  const pointsBuffer = gl.createBuffer();\r\n\r\n  gl.enableVertexAttribArray(positionAttributeLocation);\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, pointsBuffer);\r\n\r\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([...data]), gl.STATIC_DRAW);\r\n\r\n  size = 3;\r\n  type = gl.FLOAT;\r\n  normalize = false;\r\n  stride = 0;\r\n  offset = 0;\r\n  gl.vertexAttribPointer(\r\n    positionAttributeLocation,\r\n    size,\r\n    type,\r\n    normalize,\r\n    stride,\r\n    offset\r\n  );\r\n  const bufferObject = {\r\n    attributeLocation: positionAttributeLocation,\r\n    program: program,\r\n    properties: {\r\n      size,\r\n      type,\r\n      normalize,\r\n      stride,\r\n      offset\r\n    }\r\n  };\r\n\r\n  return bufferObject;\r\n}\r\n  const defaultShaderType = [\r\n    \"VERTEX_SHADER\",\r\n    \"FRAGMENT_SHADER\",\r\n  ];\r\nexport function createProgramFromSources(\r\n    gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {\r\n  const shaders = [];\r\n  for (let ii = 0; ii < shaderSources.length; ++ii) {\r\n    shaders.push(loadShader(\r\n        gl, shaderSources[ii], gl[defaultShaderType[ii]], opt_errorCallback));\r\n  }\r\n  return createProgram(gl, shaders, opt_attribs, opt_locations, opt_errorCallback);\r\n}\r\n  function loadShader(gl, shaderSource, shaderType, opt_errorCallback) {\r\n    const errFn = opt_errorCallback || error;\r\n    // Create the shader object\r\n    const shader = gl.createShader(shaderType);\r\n\r\n    // Load the shader source\r\n    gl.shaderSource(shader, shaderSource);\r\n\r\n    // Compile the shader\r\n    gl.compileShader(shader);\r\n\r\n    // Check the compile status\r\n    const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n    if (!compiled) {\r\n      // Something went wrong during compilation; get the error\r\n      const lastError = gl.getShaderInfoLog(shader);\r\n      errFn(\"*** Error compiling shader '\" + shader + \"':\" + lastError);\r\n      gl.deleteShader(shader);\r\n      return null;\r\n    }\r\n  }","export let vertexShaderSource = `#version 300 es\r\n\r\nin vec4 a_position;\r\n// in vec4 a_color;\r\n\r\n// layout (rgba8, binding = 0) uniform readonly highp image2D u_distTex;\r\n\r\nuniform mat4 u_matrix;\r\nuniform float u_fudgeFactor;\r\n// uniform sampler2D u_distTex;\r\nuniform int u_particleId;\r\nuniform int u_particleCount;\r\nuniform vec2 u_resolution;\r\nuniform vec2 u_positionMouse;\r\n\r\nout vec4 v_color;\r\n\r\nvoid main() {\r\n  //vec4 position = u_matrix * a_position;\r\n\r\n  float id = float(u_particleId);\r\n  float particleCount = float(u_particleCount);\r\n  float fracId = id/particleCount;\r\n\r\n  // float t =   texture(u_distTex,vec2(fracId,0)).x;\r\n  // float t =   imageLoad(u_distTex,ivec2(u_particleId,0)).x;\r\n  vec4 position = u_matrix * vec4(0. + fracId*u_resolution.x + u_positionMouse.x*u_resolution.y,0. + fracId*u_resolution.y ,1.,1.);\r\n  // vec4 position = u_matrix * vec4(0. + t*100000. + u_positionMouse.x*u_resolution.y,0. + fracId*u_resolution.y ,1.,1.);\r\n  \r\n  float zToDivideBy = 1.;\r\n  gl_PointSize = 2.0;\r\n  // v_color = a_color;\r\n  v_color = vec4(1);\r\n  gl_Position = vec4(position.xy / zToDivideBy, position.zw);\r\n}\r\n`;\r\n\r\nexport const fragmentShaderSource = `#version 300 es\r\n\r\nprecision mediump float;\r\n\r\nin vec4 v_color;\r\n\r\nout vec4 outColor;\r\n\r\nvoid main() {\r\n  // outColor = v_color;\r\n  outColor = vec4(0,0,1,1.);\r\n}\r\n`;\r\nexport const computeShaderSource = `#version 310 es\r\n  layout (local_size_x = 1, local_size_y = 1, local_size_z = 1) in;\r\n  layout (rgba8, binding = 0) uniform writeonly highp image2D destTex;\r\n  // layout (rgba8, binding = 1) uniform readonly highp image2D sampleTex;\r\n\r\n  uniform vec2 u_resolution;\r\n  uniform vec2 u_positionMouse;\r\n  uniform int u_particleCount;\r\n  uniform float u_timeElapsed;\r\n  void main() {\r\n    ivec2 posGlobal = ivec2(gl_GlobalInvocationID.xy);\r\n    // vec4 col =  vec4(vec2(gl_WorkGroupID.xy) / vec2(gl_NumWorkGroups.xy), 0.0, 1.0);\r\n\r\n    vec2 positionMouse = u_positionMouse - 0.5;\r\n    // vec2 directionMouse = normalize(positionMouse - previous.xy );\r\n    vec4 col = vec4(0);\r\n    // vec4 col = vec4(1,0,0,1);\r\n\r\n    if (u_timeElapsed <=  222200.) {\r\n      col = vec4(1,0,0,1);\r\n    } else {\r\n      // vec4 previous = imageLoad(sampleTex, posGlobal);\r\n      // col = previous;\r\n    }\r\n\r\n    // col += float(u_particleCount)*0.0009;\r\n    // col =  vec4(0.000001*float(gl_LocalInvocationID.x) / float(u_particleCount));\r\n    // col -= 1000.;\r\n    // col =  vec4(gl_WorkGroupID.x/2.);\r\n    imageStore(destTex, posGlobal, col );\r\n  }\r\n\r\n`;\r\nexport const computeShaderSourceOld = `#version 310 es\r\n  layout (local_size_x = ${1}, local_size_y = 1, local_size_z = 1) in;\r\n\r\n  // layout (std140, binding = 0) buffer SSBOIn {\r\n  //   Boids data[];\r\n  //  } ssboIn;\r\n\r\n  struct Particle {\r\n    vec3 position;\r\n    vec3 velocity;\r\n  }\r\n  // shared Particle sharedData[${10}];\r\n\r\n  void main () {\r\n    uint localThreadID = gl_LocallInvocationID.x;\r\n    uint globalThreadID = gl_GlobalInvocationID.x;\r\n    uint workGroupSize = gl_WorkGroupSize.x;\r\n  }\r\n\r\n\r\n`;\r\n\r\n// export let fragmentShaderSource = `#version 310 es\r\n\r\n// precision mediump float;\r\n\r\n// // Passed in and varied from the vertex shader.\r\n// in vec3 v_normal;\r\n\r\n// uniform vec3 u_reverseLightDirection;\r\n// uniform vec4 u_color;\r\n\r\n// // we need to declare an output for the fragment shader\r\n// out vec4 outColor;\r\n\r\n// void main() {\r\n//   // because v_normal is a varying it's interpolated\r\n//   // so it will not be a uint vector. Normalizing it\r\n//   // will make it a unit vector again\r\n//   vec3 normal = normalize(v_normal);\r\n\r\n//   // compute the light by taking the dot product\r\n//   // of the normal to the light's reverse direction\r\n//   float light = dot(normal, u_reverseLightDirection);\r\n\r\n//   outColor = u_color;\r\n\r\n//   // Lets multiply just the color portion (not the alpha)\r\n//   // by the light\r\n//   outColor.rgb *= light;\r\n// }\r\n// `;\r\n","import \"./styles.css\";\r\nimport { m4 } from \"./m4.js\";\r\nimport { setGeometry, geometryF } from \"./setGeometry\";\r\nimport { setColors } from \"./setColors\";\r\nimport { makeBuffer } from \"./utils\";\r\nimport {\r\n  vertexShaderSource,\r\n  fragmentShaderSource,\r\n  computeShaderSource\r\n} from \"./shaders.js\";\r\nfunction radToDeg(r) {\r\n  return (r * 180) / Math.PI;\r\n}\r\nfunction degToRad(d) {\r\n  return (d * Math.PI) / 180;\r\n}\r\n\r\n(\"use strict\");\r\n// You can either biond VAO or Buffer\r\n\r\ndocument.getElementById(\"app\").innerHTML = `<h1>Hello Vanilla!</h1>`;\r\n\r\n\r\nconst NUM_PARTICLES = 1000;\r\n\r\nfunction main() {\r\n  // Get A WebGL context\r\nfunction checkErorrs(gl,ctx){\r\n  const e = gl.getError()\r\n  if (e !== gl.NO_ERROR){\r\n    console.log(\"ERROR: \" + ctx)\r\n    console.log(e)\r\n  }\r\n\r\n}\r\n  /** @type {HTMLCanvasElement} */\r\n  const canvas = document.getElementById(\"canvas\");\r\n  const WIDTH = canvas.width\r\n  const HEIGHT = canvas.height\r\n\r\n  const gl = canvas.getContext(\"webgl2-compute\", {antialias: false});\r\n  this.gl = gl\r\n  if (!gl) {\r\n    return;\r\n  }\r\n\r\n  // ----------- SHADERS ----------- //\r\n\r\n  const programDrawParticles = webglUtils.createProgramFromSources(gl, [\r\n    vertexShaderSource,\r\n    fragmentShaderSource\r\n  ]);\r\n  \r\n  const computeShader = gl.createShader(gl.COMPUTE_SHADER);\r\n  gl.shaderSource(computeShader, computeShaderSource);\r\n  gl.compileShader(computeShader);\r\n\r\n  if (!gl.getShaderParameter(computeShader, gl.COMPILE_STATUS)) {\r\n    console.log(gl.getShaderInfoLog(computeShader));\r\n    console.log(\"error compiling shader\")\r\n    // return null;\r\n  }\r\n\r\n  const programCompute = gl.createProgram()\r\n  gl.attachShader(programCompute, computeShader)\r\n  gl.linkProgram(programCompute)\r\n\r\n  if (!gl.getProgramParameter(programCompute,gl.LINK_STATUS)){\r\n    console.log(\"error linking shader\")\r\n  }\r\n\r\n\r\n  const texture = gl.createTexture()\r\n\r\n  // make texture\r\n  gl.activeTexture(gl.TEXTURE0)\r\n  gl.bindTexture(gl.TEXTURE_2D, texture)\r\n  gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA32F,NUM_PARTICLES, 1)\r\n  gl.bindImageTexture(0, texture, 0, false, 0, gl.WRITE_ONLY, gl.RGBA8) // bind for writing\r\n\r\n  // gl.activeTexture(gl.TEXTURE1)\r\n  // gl.bindTexture(gl.TEXTURE_2D, texture)\r\n  // gl.bindImageTexture(0, texture, 0, false, 0, gl.READ_ONLY, gl.RGBA8) // bind for writing\r\n\r\n  // make framebuffer to read from texture\r\n  gl.activeTexture(gl.TEXTURE0)\r\n  const frameBuffer = gl.createFramebuffer()\r\n  gl.bindFramebuffer(gl.READ_FRAMEBUFFER, frameBuffer)\r\n  gl.framebufferTexture2D(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture,0)\r\n  \r\n  checkErorrs(gl, \"Texture problem\")\r\n\r\n\r\n\r\n\r\n  // const array = new Float32Array(NUM_PARTICLES)\r\n  // const ssbo = gl.createBuffer()\r\n  // gl.bindBuffer(gl.SHADER_STORAGE_BUFFER, ssbo)\r\n  // gl.bufferData(gl.SHADER_STORAGE_BUFFER,array, gl.DYNAMIC_COPY)\r\n  // gl.bindBufferBase(gl.SHADER_STORAGE_BUFFER, 0, ssbo)\r\n\r\n\r\n\r\n\r\n  // ----------- ATTRIBUTES ----------- //\r\n\r\n  // var positionAttributeLocation = gl.getAttribLocation(program, \"a_position\");\r\n  // var pointsAttributeLocation = gl.getAttribLocation(program, \"a_points\");\r\n\r\n  var colorLocation = gl.getUniformLocation(programDrawParticles, \"u_color\");\r\n  var matrixLocation = gl.getUniformLocation(programDrawParticles, \"u_matrix\");\r\n  var fudgeLocation = gl.getUniformLocation(programDrawParticles, \"u_fudgeFactor\");\r\n  var colorAttributeLocation = gl.getAttribLocation(programDrawParticles, \"a_color\");\r\n\r\n  // ----------- BUFFERS ----------- //\r\n\r\n  var vaoP = gl.createVertexArray();\r\n  gl.bindVertexArray(vaoP);\r\n\r\n  const pBuffer = makeBuffer(\r\n    gl,\r\n    \"a_position\",\r\n    programDrawParticles,\r\n    3,\r\n    gl.GL_FLOAT,\r\n    false,\r\n    0,\r\n    0,\r\n    geometryF\r\n  );\r\n\r\n  var translation = [0, 0, 0];\r\n  var rotation = [degToRad(0), degToRad(0), degToRad(0)];\r\n  var scale = [1, 1, 1];\r\n  var color = [Math.random(), Math.random(), Math.random(), 1];\r\n\r\n  this.positionMouse = {x: 0, y:0}\r\n\r\n  window.addEventListener('mousemove', e => {\r\n    getMousePosition.call(this, e)\r\n  })\r\n\r\n  this.timePrevious = new Date().getTime()\r\n  this.timeNext = this.timePrevious\r\n  this.timeDelta = 0\r\n  this.timeElapsed = 0\r\n  this.timeStarted = this.timePrevious\r\n\r\n  setInterval(()=>{\r\n    runCompute.call(this)\r\n    drawParticles.call(this)\r\n    this.timeNext = new Date().getTime()\r\n    this.timeDelta = this.timeNext - this.timePrevious\r\n    this.timeElapsed += this.timeDelta\r\n    this.timePrevious = this.timeNext\r\n  }, 1)\r\n\r\n  webglLessonsUI.setupSlider(\"#x\", {\r\n    value: translation[0],\r\n    slide: updatePosition(0),\r\n    max: gl.canvas.width\r\n  });\r\n\r\n  function updatePosition(index) {\r\n    return function(event, ui) {\r\n      translation[index] = ui.value;\r\n      drawScene();\r\n    };\r\n  }\r\n  // ----------- RUN ----------- //\r\n\r\n  function runCompute () {\r\n    gl.useProgram(programCompute)\r\n    gl.uniform1i(gl.getUniformLocation(programCompute, \"distTex\"), 0) // bind texture 0 \r\n    // gl.uniform1i(gl.getUniformLocation(programCompute, \"sampleTex\"), 1) // bind texture 0 \r\n    gl.uniform2fv(gl.getUniformLocation(programCompute, \"u_resolution\"), new Float32Array([gl.canvas.clientWidth, gl.canvas.clientHeight]));\r\n    gl.uniform2fv(gl.getUniformLocation(programCompute, \"u_positionMouse\"), new Float32Array([this.positionMouse.x, this.positionMouse.y]));\r\n    gl.uniform1i(gl.getUniformLocation(programCompute, \"u_particleCount\"), NUM_PARTICLES);\r\n    gl.uniform1f(gl.getUniformLocation(programCompute, \"u_timeElapsed\"), this.timeElapsed);\r\n\r\n    gl.dispatchCompute(NUM_PARTICLES, 1,1)\r\n    gl.memoryBarrier(gl.SHADER_IMAGE_ACCESS_BARRIER_BIT)\r\n\r\n  }\r\n  function drawParticles() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n\r\n\r\n\r\n\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    // gl.clearColor(0, 0, 0, 0);\r\n    // gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n\r\n    gl.bindVertexArray(vaoP);\r\n\r\n    const left = 0;\r\n    const right = gl.canvas.clientWidth;\r\n    const bottom = gl.canvas.clientHeight;\r\n    const top = 0;\r\n    const near = 400;\r\n    const far = -400;\r\n    let matrix = m4.orthographic(left, right, bottom, top, near, far);\r\n    matrix = m4.translate(\r\n      matrix,\r\n      translation[0],\r\n      translation[1],\r\n      translation[2]\r\n    );\r\n    matrix = m4.xRotate(matrix, rotation[0]);\r\n    matrix = m4.yRotate(matrix, rotation[1]);\r\n    matrix = m4.zRotate(matrix, rotation[2]);\r\n    matrix = m4.scale(matrix, scale[0], scale[1], scale[2]);\r\n\r\n\r\n    \r\n    for (let i = 0; i < NUM_PARTICLES; i++) {\r\n      gl.useProgram(programDrawParticles)\r\n      gl.uniform1i(gl.getUniformLocation(programDrawParticles, \"u_distTex\"), 0) // bind texture 0 \r\n      gl.uniformMatrix4fv(matrixLocation, false, matrix);\r\n      gl.uniform1i(gl.getUniformLocation(programDrawParticles, \"u_particleId\"), i);\r\n      gl.uniform1i(gl.getUniformLocation(programDrawParticles, \"u_particleCount\"), NUM_PARTICLES);\r\n      gl.uniform2fv(gl.getUniformLocation(programDrawParticles, \"u_resolution\"), new Float32Array([gl.canvas.clientWidth, gl.canvas.clientHeight]));\r\n      gl.uniform2fv(gl.getUniformLocation(programDrawParticles, \"u_positionMouse\"), new Float32Array([this.positionMouse.x, this.positionMouse.y]));\r\n      \r\n      var offset = 0;\r\n      var count = 16 * 6;\r\n      gl.drawArrays(gl.POINTS, offset, count);\r\n\r\n    } \r\n    gl.blitFramebuffer(\r\n      0, 0, NUM_PARTICLES, 1,\r\n      0, 0, WIDTH, HEIGHT,\r\n      gl.COLOR_BUFFER_BIT, gl.NEAREST);\r\n\r\n  }\r\n  function drawScene() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.clearColor(0, 0, 0, 0);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    // gl.bindVertexArray(vaoF);\r\n    gl.uniform4fv(colorLocation, color);\r\n\r\n    var fudgeFactor = 0;\r\n    // gl.uniform1f(fudgeLocation, fudgeFactor);\r\n\r\n    var left = 0;\r\n    var right = gl.canvas.clientWidth;\r\n    var bottom = gl.canvas.clientHeight;\r\n    var top = 0;\r\n    var near = 400;\r\n    var far = -400;\r\n    var matrix = m4.orthographic(left, right, bottom, top, near, far);\r\n    // var matrix = m4.projection(\r\n    //   gl.canvas.clientWidth,\r\n    //   gl.canvas.clientHeight,\r\n    //   400\r\n    // );\r\n    matrix = m4.translate(\r\n      matrix,\r\n      translation[0],\r\n      translation[1],\r\n      translation[2]\r\n    );\r\n    matrix = m4.xRotate(matrix, rotation[0]);\r\n    matrix = m4.yRotate(matrix, rotation[1]);\r\n    matrix = m4.zRotate(matrix, rotation[2]);\r\n    matrix = m4.scale(matrix, scale[0], scale[1], scale[2]);\r\n\r\n    gl.useProgram(programDrawParticles);\r\n    gl.uniformMatrix4fv(matrixLocation, false, matrix);\r\n\r\n    var primitiveType = gl.TRIANGLES;\r\n    var offset = 0;\r\n    var count = 16 * 6;\r\n    gl.drawArrays(gl.POINTS, offset, count);\r\n    // gl.drawArrays(primitiveType, offset, count);\r\n  }\r\n}\r\n\r\n\r\nfunction getRelativeMousePosition(event, target) {\r\n  target = target || event.target;\r\n  var rect = target.getBoundingClientRect();\r\n\r\n  return {\r\n    x: event.clientX - rect.left,\r\n    y: event.clientY - rect.top,\r\n  }\r\n}\r\n\r\nfunction getMousePosition(e) {\r\n  const pos = getNoPaddingNoBorderCanvasRelativeMousePosition(e, this.gl.canvas);\r\n\r\n  // pos is in pixel coordinates for the canvas.\r\n  // so convert to WebGL clip space coordinates\r\n  const x = pos.x / this.gl.canvas.width  *  2 - 1;\r\n  const y = pos.y / this.gl.canvas.height * -2 + 1;\r\n\r\n\r\n  this.positionMouse = {\r\n    x: x,\r\n    y: y\r\n  }\r\n}\r\n// assumes target or event.target is canvas\r\nfunction getNoPaddingNoBorderCanvasRelativeMousePosition(event, target) {\r\n  target = target || event.target;\r\n  var pos = getRelativeMousePosition(event, target);\r\n\r\n  pos.x = pos.x * target.width  / target.clientWidth;\r\n  pos.y = pos.y * target.height / target.clientHeight;\r\n\r\n  return pos;  \r\n}\r\n\r\nfunction setupCompute () {\r\n\r\n}\r\nwindow.addEventListener('DOMContentLoaded', main)\r\n// main();\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}